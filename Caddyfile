api.vuhnger.dev {
    # API Documentation (currently shows calendar service)
    reverse_proxy /docs calendar-api:5001
    reverse_proxy /redoc calendar-api:5001
    reverse_proxy /openapi.json calendar-api:5001

    # Calendar service (active)
    handle_path /calendar/* {
        rate_limit {
            zone calendar_api
            key {http.request.header.X-API-Key}
            fallback_key {http.request.remote.host}
            events 120
            window 1m
        }
        reverse_proxy calendar-api:5001
    }

    # Public proxy for julekalender frontend (injects API key from env)
    handle_path /julekalender-api/* {
        rate_limit {
            zone julekalender_api
            key {http.request.remote.host}
            events 120
            window 1m
        }
        header_up X-API-Key {env.INTERNAL_API_KEY}
        reverse_proxy calendar-api:5001
    }

    # Blog service (coming in STEP 6)
    # reverse_proxy /blog/* blog-api:5002

    # Strava service (coming in STEP 6)
    # reverse_proxy /strava/* strava-api:5003
}
